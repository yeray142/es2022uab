@startuml
left to right direction


' ***** Actors
actor Usuari
actor Client
actor Botiguer
actor Transportista
actor SysExternGoogleMaps


' ***** Relacions entre actors:
Usuari <|-- Client
Usuari <|-- Transportista
Usuari <|-- Botiguer


' ***** Relacions de l'usuari:
Usuari --> (Fer seguiment d'enviaments)
Usuari --> (Donar-se de baixa)
Usuari --> (Modificar dades perfil)
Usuari --> (Login)
Usuari --> (Registrar-se)
(Registrar-se) <|-- (Com a Client)
(Com a Client) <|-- (Utilitzant email)
(Com a Client) <|-- (Utilitzant mòbil)
(Com a Client) <|-- (Utilitzant autenticació externa)
(Utilitzant autenticació externa) --> SysExternFacebook
(Utilitzant autenticació externa) --> SysExternGoogleAuth
(Registrar-se) <|-- (Com a Botiguer)
(Registrar-se) <|-- (Com a Transportista)
(Com a Transportista) --> (Autenticar dades fiscals) : <<include>>
(Login) --> SysExternFacebook
(Login) --> SysExternGoogleAuth
SysExternGoogleMaps <-- (Fer seguiment d'enviaments)


' ***** Relacions del client:
Client --> (Sol·licitar comanda)
Client --> (Presentar ofertes)
Client --> (Seleccionar comanda i enviar)
(Seleccionar comanda i enviar) --> SysExternPaypal
(Seleccionar comanda i enviar) --> SysExternEntitatBancaria
(Seleccionar comanda i enviar) --> Botiguer
Client --> (Seleccionar remborsament)
(Seleccionar remborsament) --> (Avaluar i supervisar abonament) : <<include>>
Client --> (Rebutjar comanda)
(Presentar ofertes) --> SysExternGoogleMaps
(Presentar ofertes) --> Botiguer
(Sol·licitar comanda) --> ProveidorExtern 
(Sol·licitar comanda) --> Botiguer


' ***** Relacions del botiguer:
Botiguer --> (Escollir mètodes pagament)
Botiguer --> (Pactar variable import a carregar)
Botiguer --> (Reclamar pagaments)
(Reclamar pagaments) --> SysExternAssegurança
Botiguer --> (Escollir tipus lliurament)
(Escollir tipus lliurament) <-- (Utilitzar entrega pròpia) : <<extend>>
(Escollir tipus lliurament) <-- (Utilitzar transportistes de proximitat) : <<extend>>
(Utilitzar transportistes de proximitat) --> (Comprovar disponibilitat) : <<include>>

Botiguer --> (Enviar dades ubicació)
Transportista --> (Enviar dades ubicació)
(Enviar dades ubicació) --> SysGPS
@enduml