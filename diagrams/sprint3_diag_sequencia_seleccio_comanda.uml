@startuml

actor Client
actor SysExternPaypal
actor SysExternEntitatBancaria
actor Botiguer
boundary ClasseInterf
control ClasseControl
entity ComandaFerma
entity PerfTransportista
entity Pagament
entity TarjetaCredit

Client -> ClasseInterf : triaOferta(o)
Client -> ClasseInterf : triaMetodePagament(mp)

ClasseInterf -> ClasseControl : pagarOferta(o, mp)

alt mp == Paypal
   ClasseControl -> ClasseInterf : redireccionar(Paypal)
   ClasseInterf -> SysExternPaypal : redireccionar()
   ClasseControl -> Pagament : desarDadesPagament()
else mp == Tarjeta bancÃ ria
   ClasseControl -> TarjetaCredit : consultaDadesTarjeta()
   ClasseControl -> ClasseInterf : redireccionar(entitatBancaria)
   ClasseInterf -> SysExternEntitatBancaria : redireccionar()
   ClasseControl -> Pagament : desarDadesPagament()
end

ClasseControl -> ComandaFerma : generarComanda(o)
ClasseControl -> ClasseInterf : avisarBotiguer()
ClasseInterf -> Botiguer : avisarComanda()

ClasseControl -> PerfTransportista : canviaDisponibilitat(hora, dia)
ClasseControl -> ClasseInterf : mostrarMissatgeComandaFeta()
ClasseInterf -> Client : mostrarMissatgeComandaFeta()

@enduml